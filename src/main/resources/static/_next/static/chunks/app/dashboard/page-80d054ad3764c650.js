(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3116:function(e,l,a){Promise.resolve().then(a.t.bind(a,653,23)),Promise.resolve().then(a.bind(a,7766))},7766:function(e,l,a){"use strict";a.r(l),a.d(l,{LeafletMap:function(){return w},default:function(){return y}});var t=a(3779),s=a(1895),r=a(64),n=a(2294),i=a(6479),c=a(1734);let o=(0,t.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"700.000000pt",height:"700.000000pt",viewBox:"0 0 700.000000 700.000000",preserveAspectRatio:"xMidYMid meet",children:(0,t.jsxs)("g",{transform:"translate(0.000000,700.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:[(0,t.jsx)("path",{d:"M2165 5431 c-90 -41 -105 -84 -105 -296 l0 -165 -168 0 c-154 0 -171   -2 -212 -22 -132 -67 -132 -249 0 -315 41 -21 58 -23 212 -23 l168 0 0 -168   c0 -154 2 -171 23 -212 66 -132 248 -132 315 0 20 41 22 58 22 212 l0 168 168   0 c154 0 171 2 212 23 132 66 132 248 0 315 -41 20 -58 22 -212 22 l-168 0 0   168 c-1 214 -16 256 -113 297 -48 20 -93 19 -142 -4z"}),(0,t.jsx)("path",{d:"M1265 3931 c-48 -22 -69 -44 -90 -94 -13 -32 -15 -164 -15 -1090 l0   -1053 23 -44 c66 -132 248 -132 315 0 21 42 22 56 22 272 l0 228 1980 0 1980   0 0 -228 c0 -216 1 -230 23 -272 66 -132 248 -132 315 0 l22 44 0 756 0 756   -22 44 c-67 132 -249 132 -315 0 -23 -43 -23 -51 -23 -392 l0 -348 -1980 0   -1980 0 0 648 c0 606 -2 650 -19 687 -22 48 -44 69 -94 90 -48 20 -93 19 -142   -4z"}),(0,t.jsx)("path",{d:"M1740 3148 c-132 -67 -132 -249 0 -315 42 -22 55 -23 290 -23 235 0   248 1 290 23 132 66 132 248 0 315 -42 21 -55 22 -290 22 -235 0 -248 -1 -290   -22z"}),(0,t.jsx)("path",{d:"M2640 3148 c-132 -67 -132 -249 0 -315 l44 -23 1266 0 1266 0 44 23   c132 66 132 248 0 315 l-44 22 -1266 0 -1266 0 -44 -22z"})]})}),d=(0,t.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"700.000000pt",height:"700.000000pt",viewBox:"0 0 700.000000 700.000000",preserveAspectRatio:"xMidYMid meet",children:(0,t.jsxs)("g",{transform:"translate(0.000000,700.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:[(0,t.jsx)("path",{d:"M3286 6395 c-466 -96 -822 -465 -896 -927 -18 -111 -8 -351 18 -450   116 -431 456 -752 885 -833 103 -19 311 -19 414 0 451 86 812 447 898 898 19   103 19 311 0 414 -81 429 -401 768 -833 885 -101 27 -381 35 -486 13z m362   -371 c463 -95 725 -589 543 -1024 -53 -127 -156 -252 -274 -332 -114 -78 -226   -115 -377 -125 -367 -24 -699 233 -774 599 -107 521 361 989 882 882z"}),(0,t.jsx)("path",{d:"M2585 3775 c-187 -34 -340 -113 -480 -246 -131 -125 -224 -287 -273   -477 -15 -59 -17 -126 -17 -572 0 -492 1 -507 23 -594 81 -321 318 -577 622   -674 149 -48 137 -47 1040 -47 903 0 891 -1 1040 47 304 97 541 354 622 674   22 87 23 103 23 589 0 429 -2 510 -16 570 -44 187 -140 357 -274 484 -119 113   -247 186 -410 232 l-80 23 -875 2 c-687 2 -890 0 -945 -11z m1810 -380 c147   -39 293 -159 358 -295 19 -41 40 -99 46 -128 7 -34 11 -215 11 -500 0 -498 -1   -509 -67 -634 -64 -123 -168 -211 -312 -267 l-66 -26 -825 -3 c-568 -2 -845 1   -890 8 -158 27 -317 143 -393 287 -66 126 -67 136 -67 635 0 285 4 466 11 500   38 186 188 350 378 415 l66 22 845 1 c728 0 854 -2 905 -15z"})]})}),u=e=>{let{props:l}=e;return l["mun_obr_arctic_with_rate Sheet1_itog_letters"],(0,t.jsx)("div",{className:"map-card",children:(0,t.jsxs)("div",{className:"map-card__container",children:[(null==l?void 0:l.region)&&(0,t.jsx)("h1",{className:"map-card__title rating-} ",children:l["mun_obr_arctic_with_rate Sheet1_itog_letters"]}),(null==l?void 0:l.District)&&(0,t.jsx)("span",{className:"card-title",children:null==l?void 0:l.District}),(null==l?void 0:l.okrug)&&(0,t.jsx)("span",{className:"card__title",children:null==l?void 0:l.okrug}),(null==l?void 0:l.name)&&(0,t.jsx)("span",{className:"card-title",children:null==l?void 0:l.name}),(0,t.jsxs)("div",{className:"map-card__col",children:[o,(0,t.jsx)("strong",{className:"subtitle-1",children:"Койки:"}),(0,t.jsx)("span",{className:"small-1",children:null==l?void 0:l.count_bad})]}),(0,t.jsxs)("div",{id:"population",className:"map-card__col",children:[d,(0,t.jsx)("strong",{className:"subtitle-1",children:"Население:"}),(0,t.jsx)("span",{className:"small-1",children:null==l?void 0:l.people})]})]})})};var m=a(4688),p=a(5632);let h=(0,t.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"200.000000pt",height:"200.000000pt",viewBox:"0 0 200.000000 200.000000",preserveAspectRatio:"xMidYMid meet",children:(0,t.jsx)("g",{transform:"translate(0.000000,200.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,t.jsx)("path",{d:"M955 1491 c-60 -26 -493 -275 -507 -293 -21 -24 -23 -67 -6 -90 7 -9   54 -38 105 -65 l91 -49 -96 -55 c-105 -59 -124 -84 -106 -136 8 -24 51 -49   268 -162 197 -102 267 -134 296 -134 28 0 98 32 296 134 217 113 260 138 268   162 19 52 -1 77 -106 136 l-96 55 95 52 c52 28 99 57 104 65 14 23 10 65 -8   87 -10 11 -128 82 -262 157 -242 137 -290 156 -336 136z m305 -188 c135 -76   245 -144 245 -151 0 -18 -471 -262 -505 -262 -34 0 -505 244 -505 262 0 14   479 288 505 288 9 0 126 -62 260 -137z m-427 -408 c163 -86 170 -86 337 1   l126 67 105 -60 c57 -32 104 -64 104 -72 0 -19 -469 -261 -506 -261 -36 0   -504 242 -504 261 0 12 187 127 207 128 4 1 63 -28 131 -64z"})})}),v=(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"inherit",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})}),x=e=>{let{onClose:l,children:a}=e,[r,n]=(0,s.useState)(!1),i=()=>{var e;null===(e=document.getElementById("map-container"))||void 0===e||e.setAttribute("dragging","true"),n(!1)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"btn btn--icon btn--secondary btn--contained",onClick:()=>{var e;null===(e=document.getElementById("map-container"))||void 0===e||e.setAttribute("dragging","false"),r?n(!1):n(!0)},children:h}),r&&(0,t.jsxs)("div",{className:"side-sheets-modal ".concat(r?"open":""),children:[(0,t.jsx)("div",{className:"modal-overlay",onClick:i}),(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("span",{className:"side-sheets-modal-title",children:[(0,t.jsx)("button",{className:"btn close-button",onClick:i,children:v}),(0,t.jsx)("h4",{children:"Установить слои"})," "]}),a]})]})]})};var _=a(5760);let b=(0,_.Ue)()(e=>({layers:[],addLayer:l=>e(e=>({layers:""!==l.value?[l,...e.layers]:null})),removeLayer:l=>e(e=>({layers:e.layers.filter(e=>e!==l)}))}));var g=e=>{let{addHandler:l,removeHandler:a,label:r,value:n}=e,[i,c]=(0,s.useState)(!1),[o,d]=(0,s.useState)("");return(0,s.useEffect)(()=>{i?l(o):a(o)},[o,i]),(0,t.jsxs)("div",{className:"chip small-1 ".concat(i?"checked":""),onClick:()=>{c(!i),d(n)},children:[r,(0,t.jsx)("input",{type:"checkbox",value:n})]})};let j=[{id:1,label:"Архангельская область",value:"arhangelskaya_oblast"},{id:2,label:"base_obl_people",value:"base_obl_people"},{id:3,label:"base_obl_people_3000",value:"base_obl_people_3000"},{id:4,label:"Больничные койки",value:"mun_obr_all_bad zak_arctic_mun_obr_all_bad"},{id:5,label:"Муниципальные образования",value:"mun_obr_arctic"},{id:6,label:"Медицинские Объекты",value:"objects_zdrav objects_zdrav_2"},{id:7,label:"Результат",value:"result"},{id:8,label:"Медленные дороги",value:"slow_roads_lines arctic_slow_roads_lines"},{id:9,label:"Автограф Архангельская область",value:"auto_foot_graph_arh_obl"},{id:10,label:"Населенные пункты",value:"settlements"},{id:11,label:"Больницы",value:"hospitals"},{id:12,label:"Районы",value:"districts"}],f=()=>{b(e=>e.layers);let e=b(e=>e.removeLayer),l=b(e=>e.addLayer),[a,r]=(0,s.useState)(!1);return(0,t.jsx)("section",{className:"tooltips-bar__map-container",children:(0,t.jsx)("div",{className:"tooltips-bar__map",children:(0,t.jsxs)(x,{onSave:l,children:[(0,t.jsx)("span",{className:"small-1",children:"Район"}),(0,t.jsx)("hr",{className:"divider"}),(0,t.jsx)("ul",{children:j.slice(0,7).map(a=>(0,t.jsx)("li",{children:(0,t.jsx)(g,{addHandler:l,removeHandler:e,label:a.label,value:"department:".concat(a.value)})},a.id))}),(0,t.jsx)("span",{className:"small-1",children:"Дороги"}),(0,t.jsx)("hr",{className:"divider"}),(0,t.jsx)("ul",{children:j.slice(7,j.length).map(a=>(0,t.jsx)("li",{children:(0,t.jsx)(g,{label:a.label,addHandler:l,removeHandler:e,value:"department:".concat(a.value)})},a.id))})]})})})},w=()=>{let[e,l]=(0,s.useState)(!1);(0,s.useEffect)(()=>{l(!0)},[]);let[a,o]=(0,s.useState)(),[d,h]=(0,s.useState)();async function v(e){console.log("Ky event",e.url),await p.ZP.get(e.url).json().then(e=>h(e.features[0].properties))}let[x,_]=(0,s.useState)("auto_foot_graph_arh_obl"),g=b().layers,j=g.join(",");console.log("Layer string ",j),(0,s.useEffect)(()=>{o((0,m.x0)(4).toString())},[x,j]);let[w,y]=(0,s.useState)({center:{lat:66,lng:33},zoom:5}),[N,k]=(0,s.useState)();return(0,s.useCallback)(e=>{let{features:l,point:{x:a,y:t}}=e,s=l&&l[0];h(s&&{feature:s,x:a,y:t})},[]),console.log("Layer"+x),console.log("Card Data",d),(0,t.jsxs)(t.Fragment,{children:["  ",(0,t.jsx)(f,{}),(0,t.jsxs)(r.h,{className:"map-tiles",dragging:!0,id:"map-container",...w,minZoom:3,children:[d&&(0,t.jsx)(u,{props:d}),(0,t.jsx)(n.I,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,t.jsx)(c.Y,{url:"http://62.113.107.81:8081/geoserver/department/wms",params:{Request:"GetFeatureInfo",key:a,layers:j,format:"image/png",transparent:!0,attribution:"myattribution"},eventHandlers:{click:e=>v(e)}},"".concat(a,"-info")),(0,t.jsx)(i.o,{crossOrigin:"",url:"http://62.113.107.81:8081/geoserver/department/wms",layers:j,format:"image/png",transparent:!0,version:"1.1.0",attribution:"myattribution"},a)]})]})};var y=w}},function(e){e.O(0,[726,256,661,580,502,744],function(){return e(e.s=3116)}),_N_E=e.O()}]);